import{S as W,i as B,s as I,e as J,x as K,c as Q,a as U,y as X,d as L,b as Z,g as ee,z as ae,r as te,p as se,C as le,w as re,$ as he}from"../../chunks/index-26bce42d.js";import{p as G}from"../../chunks/jobs-cc824ca9.js";import{P as ie,g as N}from"../../chunks/PowerTable-4b16d30b.js";function fe(P){let m,f,k,S={ptData:P[1],ptInstructs:P[2],ptOptions:P[3]};return f=new ie({props:S}),P[5](f),{c(){m=J("div"),K(f.$$.fragment),this.h()},l(r){m=Q(r,"DIV",{class:!0});var c=U(m);X(f.$$.fragment,c),c.forEach(L),this.h()},h(){Z(m,"class","MuonW PowerTable")},m(r,c){ee(r,m,c),ae(f,m,null),k=!0},p(r,[c]){const x={};c&2&&(x.ptData=r[1]),c&4&&(x.ptInstructs=r[2]),c&8&&(x.ptOptions=r[3]),f.$set(x)},i(r){k||(te(f.$$.fragment,r),k=!0)},o(r){se(f.$$.fragment,r),k=!1},d(r){r&&L(m),P[5](null),le(f)}}}const Y=1,F=2,H=3;function ne(P,m,f){let k,S=[],r=[],c={};re(()=>{f(1,S=G),f(3,c={userFunctions:{customParse:x},searchPhrase:"/a.*t/gimsu",searchIsRegex:!0,checkboxColumn:!0});let e=[];Object.keys(G[0]).forEach(p=>{e.push({key:p,title:p,parseAs:"unsafe-html"})}),e[4].filterPhrase="man",e[4].filterIsRegex=!1,e[5].filterPhrase="o",e[5].filterIsRegex=!1,f(2,r=e)});function x(e){return e=A(e,k,r),e}let O={[Y]:{open:'<span class="search-match">',close:"</span>"},[F]:{open:'<span class="filter-match">',close:"</span>"},[H]:{open:'<span class="overlap-match">',close:"</span>"}};function A(e,p,C){if(p!=null&&p.getData){let _=V(e,p,C);e=q(e,_,C)}return e}function V(e,p,C){var d,h,o,D,j;let _,b,$={},s=[],T=p.getData();_=(h=(d=T.search)==null?void 0:d.value)!=null?h:"",b=(D=(o=T.search)==null?void 0:o.isRegex)!=null?D:!1,C.forEach(t=>{var y,i,E,u;$[t.key]={value:(i=(y=T.filters[t.key])==null?void 0:y.value)!=null?i:"",isRegex:(u=(E=T.filters[t.key])==null?void 0:E.isRegex)!=null?u:!1}});let n,a;if(_){let t=new RegExp("");if(b===!1){let y=_.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").trim(),i=y.toLowerCase().match(/\S+/g);i!=null&&i.length&&(y=i.join("|")),t=new RegExp(y,"gi")}else{if(a=N(_),!a)throw new Error("RegEx is not valid!");n=(j=a==null?void 0:a.flags)!=null?j:"",t=new RegExp(a.pattern,n)}e.forEach((y,i)=>{C.forEach((E,u)=>{let l=[];b===!1||(n==null?void 0:n.indexOf("g"))!==-1?l=[...y[E.key].matchAll(t)]:l=[y[E.key].match(t)],l!=null&&l.length&&(s[i]||(s[i]={}),s[i][E.key]||(s[i][E.key]=[]),l.forEach(R=>{if(R)for(let v=R.index;v<R.index+R[0].length;v++)s[i][E.key][v]=Y}))})})}let g=new RegExp("");return C.forEach((t,y)=>{var i,E;if((i=$[t.key])!=null&&i.value){if($[t.key].isRegex===!1){let u=$[t.key].value.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").trim(),l=u.toLowerCase().match(/\S+/g);l!=null&&l.length&&(u=l.join("|")),g=new RegExp(u,"gi")}else{if(a=N($[t.key].value),!a)throw new Error("RegEx is not valid!");n=(E=a==null?void 0:a.flags)!=null?E:"",g=new RegExp(a.pattern,n)}e.forEach((u,l)=>{let R=[];$[t.key].isRegex===!1||(n==null?void 0:n.indexOf("g"))!==-1?R=[...u[t.key].matchAll(g)]:R=[u[t.key].match(g)],R.length&&(s[l]||(s[l]={}),s[l][t.key]||(s[l][t.key]=[]),R.forEach(v=>{var w;if(v)for(let M=v.index;M<v.index+v[0].length;M++)(w=s[l][t.key][M])!=null&&w?s[l][t.key][M]=H:s[l][t.key][M]=F}))})}}),s}function q(e,p,C){let _=[];return e.forEach((b,$)=>{C.forEach(s=>{var T;if(_=(T=p[$])==null?void 0:T[s.key]){let n=-1,a={startChar:-1,endChar:-1,type:-1},g=[],d=0;_.forEach((h,o)=>{n===-1?a={startChar:o,endChar:o,type:h}:o-d>1?(g.push({...a,endChar:d}),a={startChar:o,endChar:o,type:h}):h!=n?(g.push({...a}),a={startChar:o,endChar:o,type:h}):a.endChar=o,n=h,d=o}),a.type>0&&g.push(a),g=g.sort((h,o)=>o.startChar-h.startChar),g.forEach(h=>{b[s.key]=[b[s.key].slice(0,h.startChar),O[h.type].open,b[s.key].slice(h.startChar,h.endChar+1),O[h.type].close,b[s.key].slice(h.endChar+1)].join("")})}})}),e}function z(e){he[e?"unshift":"push"](()=>{k=e,f(0,k)})}return[k,S,r,c,A,z]}class ge extends W{constructor(m){super(),B(this,m,ne,fe,I,{highlighter:4})}get highlighter(){return this.$$.ctx[4]}}export{ge as default};
