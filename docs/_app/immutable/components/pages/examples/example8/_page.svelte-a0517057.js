import{S as Y,i as F,s as H,k as q,w as z,l as W,m as B,x as I,h as O,n as J,b as K,y as Q,f as U,t as X,z as Z,o as ee,V as ae}from"../../../../chunks/index-83a72ca5.js";import{d as A}from"../../../../chunks/jobs-6e3cd3e4.js";import{P as te,g as j}from"../../../../chunks/PowerTable-29d16a3d.js";function se(P){let m,i,u,M={ptData:P[1],ptInstructs:P[2],ptOptions:P[3]};return i=new te({props:M}),P[5](i),{c(){m=q("div"),z(i.$$.fragment),this.h()},l(l){m=W(l,"DIV",{class:!0});var c=B(m);I(i.$$.fragment,c),c.forEach(O),this.h()},h(){J(m,"class","MuonW PowerTable")},m(l,c){K(l,m,c),Q(i,m,null),u=!0},p(l,[c]){const $={};c&2&&($.ptData=l[1]),c&4&&($.ptInstructs=l[2]),c&8&&($.ptOptions=l[3]),i.$set($)},i(l){u||(U(i.$$.fragment,l),u=!0)},o(l){X(i.$$.fragment,l),u=!1},d(l){l&&O(m),P[5](null),Z(i)}}}const w=1,D=2,L=3;function le(P,m,i){let u,M=[],l=[],c={};ee(()=>{i(1,M=A),i(3,c={userFunctions:{customParse:$},searchPhrase:"/a.*t/gimsu",searchIsRegex:!0,checkboxColumn:!0});let a=[];Object.keys(A[0]).forEach(p=>{a.push({key:p,title:p,parseAs:"unsafe-html"})}),a[4].filterPhrase="man",a[4].filterIsRegex=!1,a[5].filterPhrase="o",a[5].filterIsRegex=!1,i(2,l=a)});function $(a){return a=x(a,u,l),a}let S={[w]:{open:'<span class="search-match">',close:"</span>"},[D]:{open:'<span class="filter-match">',close:"</span>"},[L]:{open:'<span class="overlap-match">',close:"</span>"}};function x(a,p,C){if(p!=null&&p.getData){let k=G(a,p,C);a=N(a,k,C)}return a}function G(a,p,C){var d,r;let k,b,v={},s=[],T=p.getData();k=((d=T.search)==null?void 0:d.value)??"",b=((r=T.search)==null?void 0:r.isRegex)??!1,C.forEach(e=>{var y,h;v[e.key]={value:((y=T.filters[e.key])==null?void 0:y.value)??"",isRegex:((h=T.filters[e.key])==null?void 0:h.isRegex)??!1}});let f,t;if(k){let e=new RegExp("");if(b===!1){let y=k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").trim(),h=y.toLowerCase().match(/\S+/g);h!=null&&h.length&&(y=h.join("|")),e=new RegExp(y,"gi")}else{if(t=j(k),!t)throw new Error("RegEx is not valid!");f=(t==null?void 0:t.flags)??"",e=new RegExp(t.pattern,f)}a.forEach((y,h)=>{C.forEach((o,n)=>{let E=[];b===!1||(f==null?void 0:f.indexOf("g"))!==-1?E=[...y[o.key].matchAll(e)]:E=[y[o.key].match(e)],E!=null&&E.length&&(s[h]||(s[h]={}),s[h][o.key]||(s[h][o.key]=[]),E.forEach(_=>{if(_)for(let R=_.index;R<_.index+_[0].length;R++)s[h][o.key][R]=w}))})})}let g=new RegExp("");return C.forEach((e,y)=>{var h;if((h=v[e.key])!=null&&h.value){if(v[e.key].isRegex===!1){let o=v[e.key].value.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").trim(),n=o.toLowerCase().match(/\S+/g);n!=null&&n.length&&(o=n.join("|")),g=new RegExp(o,"gi")}else{if(t=j(v[e.key].value),!t)throw new Error("RegEx is not valid!");f=(t==null?void 0:t.flags)??"",g=new RegExp(t.pattern,f)}a.forEach((o,n)=>{let E=[];v[e.key].isRegex===!1||(f==null?void 0:f.indexOf("g"))!==-1?E=[...o[e.key].matchAll(g)]:E=[o[e.key].match(g)],E.length&&(s[n]||(s[n]={}),s[n][e.key]||(s[n][e.key]=[]),E.forEach(_=>{if(_)for(let R=_.index;R<_.index+_[0].length;R++)s[n][e.key][R]??null?s[n][e.key][R]=L:s[n][e.key][R]=D}))})}}),s}function N(a,p,C){let k=[];return a.forEach((b,v)=>{C.forEach(s=>{var T;if(k=(T=p[v])==null?void 0:T[s.key]){let f=-1,t={startChar:-1,endChar:-1,type:-1},g=[],d=0;k.forEach((r,e)=>{f===-1?t={startChar:e,endChar:e,type:r}:e-d>1?(g.push({...t,endChar:d}),t={startChar:e,endChar:e,type:r}):r!=f?(g.push({...t}),t={startChar:e,endChar:e,type:r}):t.endChar=e,f=r,d=e}),t.type>0&&g.push(t),g=g.sort((r,e)=>e.startChar-r.startChar),g.forEach(r=>{b[s.key]=[b[s.key].slice(0,r.startChar),S[r.type].open,b[s.key].slice(r.startChar,r.endChar+1),S[r.type].close,b[s.key].slice(r.endChar+1)].join("")})}})}),a}function V(a){ae[a?"unshift":"push"](()=>{u=a,i(0,u)})}return[u,M,l,c,x,V]}class fe extends Y{constructor(m){super(),F(this,m,le,se,H,{highlighter:4})}get highlighter(){return this.$$.ctx[4]}}export{fe as default};
